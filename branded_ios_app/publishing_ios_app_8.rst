===============================
Additional Server Configuration
===============================

Support for Apple Universal Links:
----------------------------------

There's some special changes that need to be made. Quoting from `Apple's official documentation on Universal Link Support
<https://developer.apple.com/library/content/documentation/General/Conceptual/AppSearch/UniversalLinks.html>`_:

 Adding support for universal links is easy. There are three steps you need to take:

    - Create an apple-app-site-association file that contains JSON data about the URLs that your app can handle.
    - Upload the apple-app-site-association file to your HTTPS web server. You can place the file at the root of your server or in the .well-known subdirectory.
    - Prepare your app to handle universal links. 

The `apple-app-site-association` will be generated by ownbrander and needs to be served statically on your site through HTTPS. You can safely place it on the root folder of your ownCloud installation (e.g. `/var/www/owncloud`). To achieve the second requirement, some changes will also need to be done on your Apache configuration.

If you configured your installation with the official `Admin Manual
<https://doc.owncloud.org/server/10.0/admin_manual/installation/source_installation.html#apache-configuration-label>`_, your `owncloud.conf` file should include the following:

.. code:: apache

    # Create two alias for the file (for compatibility reasons):
    AliasMatch "^/(\.well-known/)?apple-app-site-association$" "/var/www/owncloud/apple-app-site-association"

    <Directory /var/www/owncloud/>
        Options +FollowSymlinks
        AllowOverride All

        # Set the right mime-type for the file:
        <Files apple-app-site-association>
            Header set Content-type "application/json"
        </Files>

        [...]
    </Directory>

Also, a new `RewriteCond` needs to be included in your `.htaccess` so no other redirections will apply to any of these two paths:

.. code:: apache

  RewriteCond %{REQUEST_URI} !^/(\.well-known/)?apple-app-site-association$

For this same reason, if you're behind a firewall, additional access rules will be required to whitelist the URLs. 